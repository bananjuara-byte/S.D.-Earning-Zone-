<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Promo System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f2f2f2;
  margin:0;
  padding:0;
}
.page{
  display:none;
  padding:20px;
}
button{
  padding:10px 15px;
  margin:5px;
  cursor:pointer;
}
input{
  padding:10px;
  width:100%;
  margin:5px 0;
}
.show{
  display:block;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="page show">
  <h2>Welcome</h2>
  <button onclick="goLogin()">Login</button>
  <button onclick="openAdmin()">Admin Panel</button>
</div>

<!-- LOGIN -->
<div id="login" class="page">
  <h3>User Login</h3>
  <input type="password" id="userPass" placeholder="Password">
  <label>
    <input type="checkbox" onclick="togglePass('userPass')"> Show Password
  </label><br>
  <button onclick="userLogin()">Login</button>
</div>

<!-- GENERATE -->
<div id="generate" class="page">
  <h3>Select Gender</h3>
  <label><input type="radio" name="gender" value="male"> Male</label><br>
  <label><input type="radio" name="gender" value="female"> Female</label><br><br>
  <button onclick="generateFile()">Generate</button>
</div>

<!-- FILE VIEW -->
<div id="fileView" class="page">
  <h3 id="fileTitle"></h3>
  <p>This file opened successfully.</p>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin" class="page">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Admin Password">
  <label>
    <input type="checkbox" onclick="togglePass('adminPass')"> Show Password
  </label><br>
  <button onclick="adminLogin()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="page">
  <h3>Admin Panel</h3>
  <p>Total Used Files: <span id="usedCount">0</span></p>
  <button onclick="resetData()">Reset All</button>
</div>

<script>
/* ---------- BASIC NAV ---------- */
function show(page){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('show'));
  page.classList.add('show');
  history.pushState({},'', '');
}

window.onpopstate = function(){
  show(document.getElementById('home'));
};

/* ---------- PASSWORD TOGGLE ---------- */
function togglePass(id){
  const i = document.getElementById(id);
  i.type = i.type === "password" ? "text" : "password";
}

/* ---------- USER LOGIN ---------- */
function goLogin(){
  show(document.getElementById('login'));
}

function userLogin(){
  if(userPass.value === "1234"){
    localStorage.setItem("loggedIn","yes");
    show(document.getElementById('generate'));
  }else{
    alert("Wrong password");
  }
}

if(localStorage.getItem("loggedIn")==="yes"){
  show(document.getElementById('generate'));
}

/* ---------- FILE SYSTEM ---------- */
let maleFiles = ["Male File 1","Male File 2","Male File 3"];
let femaleFiles = ["Female File 1","Female File 2","Female File 3"];

let used = JSON.parse(localStorage.getItem("usedFiles") || "[]");

function generateFile(){
  let g = document.querySelector('input[name="gender"]:checked');
  if(!g){ alert("Select gender"); return; }

  let list = g.value==="male" ? maleFiles : femaleFiles;
  let available = list.filter(f=>!used.includes(f));

  if(available.length===0){
    alert("No file left");
    return;
  }

  let file = available[Math.floor(Math.random()*available.length)];
  used.push(file);
  localStorage.setItem("usedFiles",JSON.stringify(used));

  fileTitle.innerText = file;
  show(document.getElementById("fileView"));
}

/* ---------- ADMIN ---------- */
function openAdmin(){
  show(document.getElementById("adminLogin"));
}

function adminLogin(){
  if(adminPass.value==="@123456@"){
    show(document.getElementById("adminPanel"));
    updateStats();
  }else{
    alert("Wrong admin password");
  }
}

function updateStats(){
  document.getElementById("usedCount").innerText = used.length;
}

function resetData(){
  if(confirm("Reset all data?")){
    localStorage.clear();
    location.reload();
  }
}
</script>

</body>
</html>
